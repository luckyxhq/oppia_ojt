<h2>v0.0.1 (unminified)</h2>
<p>For instructions: see the README file in /assets/scripts.</p>

<style type="text/css">
  .e2e-test-results {
    display: none;
  }
</style>

<script src="/assets/scripts/oppia-player-0.0.1.js"></script>
<script src="/assets/scripts/embedding_tests.js"></script>
<script src="../../third_party/static/jquery-3.5.1/jquery.min.js"></script>

<input class="e2e-test-exploration-id-input-field" type="text" placeholder="explorationId">
<input class="e2e-test-exploration-id-submit-button" type="submit" value="Update Exploration ID" onclick="onChangeExpId()">

<div class="e2e-test-results">
  <div class="e2e-test-embedded-exploration">
    <h3>Standard embedding of the latest version</h3>
    <oppia oppia-id="idToBeReplaced" exp-language="es"></oppia>
  </div>
</div>

<script type="text/javascript">
  var placeholderExplorationId = 'idToBeReplaced';
  var onChangeExpId = function() {
    var inputField = document.querySelector('.e2e-test-exploration-id-input-field');
    var newExplorationId = inputField ? inputField.value : '';
    if (!/^[a-zA-Z0-9_-]+$/.test(newExplorationId)) {
      alert(
        'Invalid exploration ID. Only letters, numbers, underscores and ' +
        'dashes are allowed.');
      return;
    }

    var iframes = document.querySelectorAll('div > iframe');
    iframes.forEach(function(iframe) {
      var src = iframe.getAttribute('src');
      var updatedSrc = src.replace(
        placeholderExplorationId, encodeURIComponent(newExplorationId));
      iframe.setAttribute('src', updatedSrc);
    });

    placeholderExplorationId = newExplorationId;

    var results = document.querySelector('.e2e-test-results');
    if (results) {
      results.style.display = 'block';
    }
  };
</script>
