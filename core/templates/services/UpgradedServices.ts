// Copyright 2021 The Oppia Authors. All Rights Reserved.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS-IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

/**
 * @fileoverview Service for storing all upgraded services
 */

import {Injectable, Injector} from '@angular/core';
import {Meta, Title} from '@angular/platform-browser';
import {
  // eslint-disable-next-line oppia/disallow-httpclient
  HttpClient,
  HttpXhrBackend,
  // eslint-disable-next-line camelcase, oppia/disallow-flags
  ɵangular_packages_common_http_http_d,
} from '@angular/common/http';

import {AdminBackendApiService} from 'domain/admin/admin-backend-api.service';
import {AdminDataService} from 'pages/admin-page/services/admin-data.service';
import {AdminRouterService} from 'pages/admin-page/services/admin-router.service';
import {AdminTaskManagerService} from 'pages/admin-page/services/admin-task-manager.service';
import {AlertsService} from 'services/alerts.service';
import {
  AlgebraicExpressionInputRulesService,
  // eslint-disable-next-line max-len
} from 'interactions/AlgebraicExpressionInput/directives/algebraic-expression-input-rules.service';
import {
  AlgebraicExpressionInputValidationService,
  // eslint-disable-next-line max-len
} from 'interactions/AlgebraicExpressionInput/directives/algebraic-expression-input-validation.service';
import {AngularNameService} from 'pages/exploration-editor-page/services/angular-name.service';
import {AnswerClassificationService} from 'pages/exploration-player-page/services/answer-classification.service';
import {AssetsBackendApiService} from 'services/assets-backend-api.service';
import {AudioBarStatusService} from 'services/audio-bar-status.service';
import {AudioPreloaderService} from 'pages/exploration-player-page/services/audio-preloader.service';
import {AudioTranslationManagerService} from 'pages/exploration-player-page/services/audio-translation-manager.service';
import {AutogeneratedAudioPlayerService} from 'services/autogenerated-audio-player.service';
import {AutoplayedVideosService} from 'services/autoplayed-videos.service';
import {BackgroundMaskService} from 'services/stateful/background-mask.service';
import {BaseInteractionValidationService} from 'interactions/base-interaction-validation.service';
import {BottomNavbarStatusService} from 'services/bottom-navbar-status.service';
import {PreventPageUnloadEventService} from 'services/prevent-page-unload-event.service';
import {BrowserCheckerService} from 'domain/utilities/browser-checker.service';
import {CamelCaseToHyphensPipe} from 'filters/string-utility-filters/camel-case-to-hyphens.pipe';
import {CkEditorCopyContentService} from 'components/ck-editor-helpers/ck-editor-copy-content.service';
import {ClassroomBackendApiService} from 'domain/classroom/classroom-backend-api.service';
import {CodeNormalizerService} from 'services/code-normalizer.service';
import {CodeReplRulesService} from 'interactions/CodeRepl/directives/code-repl-rules.service';
import {CodeReplValidationService} from 'interactions/CodeRepl/directives/code-repl-validation.service';
import {CollectionCreationBackendService} from 'components/entity-creation-services/collection-creation-backend-api.service';
import {CollectionCreationService} from 'components/entity-creation-services/collection-creation.service';
import {CollectionRightsBackendApiService} from 'domain/collection/collection-rights-backend-api.service';
import {CollectionValidationService} from 'domain/collection/collection-validation.service';
import {ComputeGraphService} from 'services/compute-graph.service';
import {ConceptCardBackendApiService} from 'domain/skill/concept-card-backend-api.service';
import {PageContextService} from 'services/page-context.service';
import {ContinueRulesService} from 'interactions/Continue/directives/continue-rules.service';
import {ContinueValidationService} from 'interactions/Continue/directives/continue-validation.service';
import {
  ContributionOpportunitiesBackendApiService,
  // eslint-disable-next-line max-len
} from 'pages/contributor-dashboard-page/services/contribution-opportunities-backend-api.service';
import {ConstructTranslationIdsService} from 'services/construct-translation-ids.service';
import {CreatorDashboardBackendApiService} from 'domain/creator_dashboard/creator-dashboard-backend-api.service';
import {CsrfTokenService} from 'services/csrf-token.service';
import {CurrentInteractionService} from 'pages/exploration-player-page/services/current-interaction.service';
import {DateTimeFormatService} from 'services/date-time-format.service';
import {DeviceInfoService} from 'services/contextual/device-info.service';
import {DocumentAttributeCustomizationService} from 'services/contextual/document-attribute-customization.service';
import {
  DragAndDropSortInputRulesService,
  // eslint-disable-next-line max-len
} from 'interactions/DragAndDropSortInput/directives/drag-and-drop-sort-input-rules.service';
import {
  DragAndDropSortInputValidationService,
  // eslint-disable-next-line max-len
} from 'interactions/DragAndDropSortInput/directives/drag-and-drop-sort-input-validation.service';
import {EditableCollectionBackendApiService} from 'domain/collection/editable-collection-backend-api.service';
import {EditabilityService} from 'services/editability.service';
import {EditorFirstTimeEventsService} from 'pages/exploration-editor-page/services/editor-first-time-events.service';
import {EmailDashboardBackendApiService} from 'domain/email-dashboard/email-dashboard-backend-api.service';
import {EndExplorationRulesService} from 'interactions/EndExploration/directives/end-exploration-rules.service';
import {EndExplorationValidationService} from 'interactions/EndExploration/directives/end-exploration-validation.service';
import {ExplorationDiffService} from 'pages/exploration-editor-page/services/exploration-diff.service';
import {ExplorationFeaturesBackendApiService} from 'services/exploration-features-backend-api.service';
import {ExplorationFeaturesService} from 'services/exploration-features.service';
import {ExplorationHtmlFormatterService} from 'services/exploration-html-formatter.service';
import {ExplorationImprovementsBackendApiService} from 'services/exploration-improvements-backend-api.service';
import {ExplorationImprovementsTaskRegistryService} from 'services/exploration-improvements-task-registry.service';
import {ExplorationObjectFactory} from 'domain/exploration/ExplorationObjectFactory';
import {ExplorationPermissionsBackendApiService} from 'domain/exploration/exploration-permissions-backend-api.service';
import {ExplorationRecommendationsBackendApiService} from 'domain/recommendations/exploration-recommendations-backend-api.service';
import {ExplorationStatsBackendApiService} from 'services/exploration-stats-backend-api.service';
import {ExplorationStatsService} from 'services/exploration-stats.service';
import {ExpressionEvaluatorService} from 'expressions/expression-evaluator.service';
import {ExpressionParserService} from 'expressions/expression-parser.service';
import {
  ExplorationRecommendationsService,
  // eslint-disable-next-line max-len
} from 'pages/exploration-player-page/services/exploration-recommendations.service';
import {ExpressionSyntaxTreeService} from 'expressions/expression-syntax-tree.service';
import {ExtensionTagAssemblerService} from 'services/extension-tag-assembler.service';
import {ExternalSaveService} from 'services/external-save.service';
import {FocusManagerService} from 'services/stateful/focus-manager.service';
import {FractionInputRulesService} from 'interactions/FractionInput/directives/fraction-input-rules.service';
import {FractionInputValidationService} from 'interactions/FractionInput/directives/fraction-input-validation.service';
import {GraphDetailService} from 'interactions/GraphInput/directives/graph-detail.service';
import {GraphInputRulesService} from 'interactions/GraphInput/directives/graph-input-rules.service';
import {GraphInputValidationService} from 'interactions/GraphInput/directives/graph-input-validation.service';
import {GraphUtilsService} from 'interactions/GraphInput/directives/graph-utils.service';
import {GuestCollectionProgressService} from 'domain/collection/guest-collection-progress.service';
import {HtmlEscaperService} from 'services/html-escaper.service';
import {I18nLanguageCodeService} from 'services/i18n-language-code.service';
import {IdGenerationService} from 'services/id-generation.service';
import {ImageClickInputRulesService} from 'interactions/ImageClickInput/directives/image-click-input-rules.service';
import {
  ImageClickInputValidationService,
  // eslint-disable-next-line max-len
} from 'interactions/ImageClickInput/directives/image-click-input-validation.service';
import {ImprovementsService} from 'services/improvements.service';
import {InteractionAttributesExtractorService} from 'interactions/interaction-attributes-extractor.service';
import {
  InteractionDetailsCacheService,
  // eslint-disable-next-line max-len
} from 'pages/exploration-editor-page/editor-tab/services/interaction-details-cache.service';
import {InteractionRulesRegistryService} from 'services/interaction-rules-registry.service';
import {InteractionSpecsService} from 'services/interaction-specs.service';
import {InteractiveMapRulesService} from 'interactions/InteractiveMap/directives/interactive-map-rules.service';
import {InteractiveMapValidationService} from 'interactions/InteractiveMap/directives/interactive-map-validation.service';
import {
  ItemSelectionInputRulesService,
  // eslint-disable-next-line max-len
} from 'interactions/ItemSelectionInput/directives/item-selection-input-rules.service';
import {
  ItemSelectionInputValidationService,
  // eslint-disable-next-line max-len
} from 'interactions/ItemSelectionInput/directives/item-selection-input-validation.service';
import {LanguageUtilService} from 'domain/utilities/language-util.service';
import {LearnerAnswerDetailsBackendApiService} from 'domain/statistics/learner-answer-details-backend-api.service';
import {LearnerDashboardBackendApiService} from 'domain/learner_dashboard/learner-dashboard-backend-api.service';
import {LearnerDashboardIdsBackendApiService} from 'domain/learner_dashboard/learner-dashboard-ids-backend-api.service';
import {LearnerParamsService} from 'pages/exploration-player-page/services/learner-params.service';
import {LocalStorageService} from 'services/local-storage.service';
import {LoaderService} from 'services/loader.service';
import {LoggerService} from 'services/contextual/logger.service';
import {
  MathEquationInputRulesService,
  // eslint-disable-next-line max-len
} from 'interactions/MathEquationInput/directives/math-equation-input-rules.service';
import {
  MathEquationInputValidationService,
  // eslint-disable-next-line max-len
} from 'interactions/MathEquationInput/directives/math-equation-input-validation.service';
import {MessengerService} from 'services/messenger.service';
import {MetaTagCustomizationService} from 'services/contextual/meta-tag-customization.service';
import {
  MultipleChoiceInputRulesService,
  // eslint-disable-next-line max-len
} from 'interactions/MultipleChoiceInput/directives/multiple-choice-input-rules.service';
import {
  MultipleChoiceInputValidationService,
  // eslint-disable-next-line max-len
} from 'interactions/MultipleChoiceInput/directives/multiple-choice-input-validation.service';
import {MusicNotesInputRulesService} from 'interactions/MusicNotesInput/directives/music-notes-input-rules.service';
import {
  MusicNotesInputValidationService,
  // eslint-disable-next-line max-len
} from 'interactions/MusicNotesInput/directives/music-notes-input-validation.service';
import {
  MusicPhrasePlayerService,
  // eslint-disable-next-line max-len
} from 'interactions/MusicNotesInput/directives/music-phrase-player.service';
import {NormalizeWhitespacePipe} from 'filters/string-utility-filters/normalize-whitespace.pipe';
import {
  NormalizeWhitespacePunctuationAndCasePipe,
  // eslint-disable-next-line max-len
} from 'filters/string-utility-filters/normalize-whitespace-punctuation-and-case.pipe';
import {NumberAttemptsService} from 'pages/exploration-player-page/services/number-attempts.service';
import {NumericInputRulesService} from 'interactions/NumericInput/directives/numeric-input-rules.service';
import {NumericInputValidationService} from 'interactions/NumericInput/directives/numeric-input-validation.service';
import {NumberWithUnitsRulesService} from 'interactions/NumberWithUnits/directives/number-with-units-rules.service';
import {
  NumberWithUnitsValidationService,
  // eslint-disable-next-line max-len
} from 'interactions/NumberWithUnits/directives/number-with-units-validation.service';
import {
  NumericExpressionInputRulesService,
  // eslint-disable-next-line max-len
} from 'interactions/NumericExpressionInput/directives/numeric-expression-input-rules.service';
import {
  NumericExpressionInputValidationService,
  // eslint-disable-next-line max-len
} from 'interactions/NumericExpressionInput/directives/numeric-expression-input-validation.service';
import {PageTitleService} from 'services/page-title.service';
import {PencilCodeEditorRulesService} from 'interactions/PencilCodeEditor/directives/pencil-code-editor-rules.service';
import {
  PencilCodeEditorValidationService,
  // eslint-disable-next-line max-len
} from 'interactions/PencilCodeEditor/directives/pencil-code-editor-validation.service';
import {FeatureFlagDummyBackendApiService} from 'domain/feature-flag/feature-flag-dummy-backend-api.service';
import {PlatformFeatureService} from 'services/platform-feature.service';
import {PlatformParameterAdminBackendApiService} from 'domain/platform-parameter/platform-parameter-admin-backend-api.service';
import {FeatureFlagBackendApiService} from 'domain/feature-flag/feature-flag-backend-api.service';
import {PlayerPositionService} from 'pages/exploration-player-page/services/player-position.service';
import {PlayerTranscriptService} from 'pages/exploration-player-page/services/player-transcript.service';
import {PlaythroughBackendApiService} from 'domain/statistics/playthrough-backend-api.service';
import {PlaythroughIssuesBackendApiService} from 'services/playthrough-issues-backend-api.service';
import {PopulateRuleContentIdsService} from 'pages/exploration-editor-page/services/populate-rule-content-ids.service';
import {PretestQuestionBackendApiService} from 'domain/question/pretest-question-backend-api.service';
import {ProfilePageBackendApiService} from 'pages/profile-page/profile-page-backend-api.service';
import {QuestionBackendApiService} from 'domain/question/question-backend-api.service';
import {RatingComputationService} from 'components/ratings/rating-computation/rating-computation.service';
import {
  RatioExpressionInputRulesService,
  // eslint-disable-next-line max-len
} from 'interactions/RatioExpressionInput/directives/ratio-expression-input-rules.service';
import {
  RatioExpressionInputValidationService,
  // eslint-disable-next-line max-len
} from 'interactions/RatioExpressionInput/directives/ratio-expression-input-validation.service';
import {ReadOnlyCollectionBackendApiService} from 'domain/collection/read-only-collection-backend-api.service';
import {ReviewTestBackendApiService} from 'domain/review_test/review-test-backend-api.service';
import {ReviewTestEngineService} from 'pages/review-test-page/review-test-engine.service';
import {SchemaDefaultValueService} from 'services/schema-default-value.service';
import {SchemaFormSubmittedService} from 'services/schema-form-submitted.service';
import {SchemaUndefinedLastElementService} from 'services/schema-undefined-last-element.service';
import {SearchExplorationsBackendApiService} from 'domain/collection/search-explorations-backend-api.service';
import {SetInputRulesService} from 'interactions/SetInput/directives/set-input-rules.service';
import {SetInputValidationService} from 'interactions/SetInput/directives/set-input-validation.service';
import {SidebarStatusService} from 'services/sidebar-status.service';
import {SiteAnalyticsService} from 'services/site-analytics.service';
import {SkillCreationBackendApiService} from 'domain/skill/skill-creation-backend-api.service';
import {SkillMasteryBackendApiService} from 'domain/skill/skill-mastery-backend-api.service';
import {SkillRightsBackendApiService} from 'domain/skill/skill-rights-backend-api.service';
import {SolutionValidityService} from 'pages/exploration-editor-page/editor-tab/services/solution-validity.service';
import {SpeechSynthesisChunkerService} from 'services/speech-synthesis-chunker.service';
import {
  StateContentService,
  // eslint-disable-next-line max-len
} from 'components/state-editor/state-editor-properties-services/state-content.service';
import {
  StateCustomizationArgsService,
  // eslint-disable-next-line max-len
} from 'components/state-editor/state-editor-properties-services/state-customization-args.service';
import {StateEditorRefreshService} from 'pages/exploration-editor-page/services/state-editor-refresh.service';
import {
  StateEditorService,
  // eslint-disable-next-line max-len
} from 'components/state-editor/state-editor-properties-services/state-editor.service';
import {StateGraphLayoutService} from 'components/graph-services/graph-layout.service';
import {
  StateHintsService,
  // eslint-disable-next-line max-len
} from 'components/state-editor/state-editor-properties-services/state-hints.service';
import {
  StateInteractionIdService,
  // eslint-disable-next-line max-len
} from 'components/state-editor/state-editor-properties-services/state-interaction-id.service';
import {StateInteractionStatsBackendApiService} from 'domain/exploration/state-interaction-stats-backend-api.service';
import {StateInteractionStatsService} from 'services/state-interaction-stats.service';
import {StateNameService} from 'components/state-editor/state-editor-properties-services/state-name.service';
import {
  StateParamChangesService,
  // eslint-disable-next-line max-len
} from 'components/state-editor/state-editor-properties-services/state-param-changes.service';
import {
  StatePropertyService,
  // eslint-disable-next-line max-len
} from 'components/state-editor/state-editor-properties-services/state-property.service';
import {
  StateSolicitAnswerDetailsService,
  // eslint-disable-next-line max-len
} from 'components/state-editor/state-editor-properties-services/state-solicit-answer-details.service';
import {
  StateSolutionService,
  // eslint-disable-next-line max-len
} from 'components/state-editor/state-editor-properties-services/state-solution.service';
import {StateTopAnswersStatsBackendApiService} from 'services/state-top-answers-stats-backend-api.service';
import {StateTopAnswersStatsObjectFactory} from 'domain/statistics/state-top-answers-stats-object.factory';
import {StateTopAnswersStatsService} from 'services/state-top-answers-stats.service';
import {StatsReportingBackendApiService} from 'domain/exploration/stats-reporting-backend-api.service';
import {StoryEditorNavigationService} from 'pages/story-editor-page/services/story-editor-navigation.service';
import {StoryViewerBackendApiService} from 'domain/story_viewer/story-viewer-backend-api.service';
import {SubtopicViewerBackendApiService} from 'domain/subtopic_viewer/subtopic-viewer-backend-api.service';
import {SuggestionModalService} from 'services/suggestion-modal.service';
import {SuggestionsService} from 'services/suggestions.service';
import {TextInputRulesService} from 'interactions/TextInput/directives/text-input-rules.service';
import {TextInputValidationService} from 'interactions/TextInput/directives/text-input-validation.service';
import {
  ThreadStatusDisplayService,
  // eslint-disable-next-line max-len
} from 'pages/exploration-editor-page/feedback-tab/services/thread-status-display.service';
import {TopicCreationBackendApiService} from 'domain/topic/topic-creation-backend-api.service';
import {
  TopicsAndSkillsDashboardBackendApiService,
  // eslint-disable-next-line max-len
} from 'domain/topics_and_skills_dashboard/topics-and-skills-dashboard-backend-api.service';
import {
  TopicsAndSkillsDashboardPageService,
  // eslint-disable-next-line max-len
} from 'pages/topics-and-skills-dashboard-page/topics-and-skills-dashboard-page.service';
import {TopicViewerBackendApiService} from 'domain/topic_viewer/topic-viewer-backend-api.service';
import {UrlInterpolationService} from 'domain/utilities/url-interpolation.service';
import {UrlService} from 'services/contextual/url.service';
import {UserBackendApiService} from 'services/user-backend-api.service';
import {UserService} from 'services/user.service';
import {UserExplorationPermissionsService} from 'pages/exploration-editor-page/services/user-exploration-permissions.service';
import {UtilsService} from 'services/utils.service';
import {ValidatorsService} from 'services/validators.service';
import {VersionTreeService} from 'pages/exploration-editor-page/history-tab/services/version-tree.service';
import {VoiceoverBackendApiService} from 'domain/voiceover/voiceover-backend-api.service';
import {WindowDimensionsService} from 'services/contextual/window-dimensions.service';
import {WindowRef} from 'services/contextual/window-ref.service';
import {
  SolutionVerificationService,
  // eslint-disable-next-line max-len
} from 'pages/exploration-editor-page/editor-tab/services/solution-verification.service';
import {ResponsesService} from 'pages/exploration-editor-page/editor-tab/services/responses.service';
import {QuestionValidationService} from './question-validation.service';
import {MathInteractionsService} from './math-interactions.service';
import {EntityVoiceoversService} from './entity-voiceovers.services';
import {AutomaticVoiceoverHighlightService} from './automatic-voiceover-highlight-service';
import {VoiceoverPlayerService} from 'pages/exploration-player-page/services/voiceover-player.service';
import {VoiceoverLanguageManagementService} from './voiceover-language-management-service';

interface UpgradedServicesDict {
  // Type 'unknown' is used here because we don't know the exact type of
  // the service. We are using 'unknown' because we want to avoid using
  // 'any' as it is not type safe.
  [service: string]: unknown;
}
@Injectable({
  providedIn: 'root',
})
export class UpgradedServices {
  getUpgradedServices(): UpgradedServicesDict {
    var upgradedServices = {};
    // We are using eslint disable here for multilines because we have not used
    // dot notation at a lot of places so it does not seem practical to use
    // "eslint disable next line" for each of them. Also, we can't use dot
    // notation either because then "Property 'AdminRouterService' does not
    // exist on type '{}'" lint error will be raised by the linter.
    /* eslint-disable-next-line oppia/no-multiline-disable */
    /* eslint-disable dot-notation */

    // Topological level: 0.
    upgradedServices['Injector'] = Injector;
    upgradedServices['AdminRouterService'] = new AdminRouterService();
    upgradedServices['AdminTaskManagerService'] = new AdminTaskManagerService();
    upgradedServices['AlgebraicExpressionInputRulesService'] =
      new AlgebraicExpressionInputRulesService(
        new MathInteractionsService(),
        new NumericExpressionInputRulesService()
      );
    upgradedServices['AngularNameService'] = new AngularNameService();
    upgradedServices['AudioBarStatusService'] = new AudioBarStatusService();
    upgradedServices['AudioTranslationManagerService'] =
      new AudioTranslationManagerService();
    upgradedServices['AutoplayedVideosService'] = new AutoplayedVideosService();
    upgradedServices['BackgroundMaskService'] = new BackgroundMaskService();
    upgradedServices['BaseInteractionValidationService'] =
      new BaseInteractionValidationService();
    upgradedServices['BrowserCheckerService'] = new BrowserCheckerService(
      new WindowRef()
    );
    upgradedServices['CamelCaseToHyphensPipe'] = new CamelCaseToHyphensPipe();
    upgradedServices['CodeNormalizerService'] = new CodeNormalizerService();
    upgradedServices['CollectionValidationService'] =
      new CollectionValidationService();
    upgradedServices['ComputeGraphService'] = new ComputeGraphService();
    upgradedServices['ConstructTranslationIdsService'] =
      new ConstructTranslationIdsService();
    upgradedServices['ContinueRulesService'] = new ContinueRulesService();
    upgradedServices['DateTimeFormatService'] = new DateTimeFormatService();
    upgradedServices['DragAndDropSortInputRulesService'] =
      new DragAndDropSortInputRulesService();
    upgradedServices['EditabilityService'] = new EditabilityService();
    upgradedServices['EndExplorationRulesService'] =
      new EndExplorationRulesService();
    upgradedServices['ExplorationDiffService'] = new ExplorationDiffService();
    upgradedServices['ExplorationFeaturesService'] =
      new ExplorationFeaturesService();
    upgradedServices['ExpressionParserService'] = new ExpressionParserService();
    upgradedServices['ExternalSaveService'] = new ExternalSaveService();
    upgradedServices['EntityVoiceoversService'] = new EntityVoiceoversService(
      upgradedServices['VoiceoverBackendApiService']
    );
    upgradedServices['VoiceoverLanguageManagementService'] =
      new VoiceoverLanguageManagementService();
    upgradedServices['VoiceoverPlayerService'] = new VoiceoverPlayerService(
      upgradedServices['EntityVoiceoversService']
    );
    upgradedServices['AutomaticVoiceoverHighlightService'] =
      new AutomaticVoiceoverHighlightService(
        upgradedServices['LocalStorageService'],
        upgradedServices['VoiceoverPlayerService']
      );
    upgradedServices['GraphDetailService'] = new GraphDetailService();
    upgradedServices['GraphUtilsService'] = new GraphUtilsService();
    upgradedServices['I18nLanguageCodeService'] = new I18nLanguageCodeService();
    upgradedServices['IdGenerationService'] = new IdGenerationService();
    upgradedServices['ImageClickInputRulesService'] =
      new ImageClickInputRulesService();
    upgradedServices['ImprovementsService'] = new ImprovementsService();
    upgradedServices['InteractionDetailsCacheService'] =
      new InteractionDetailsCacheService();
    upgradedServices['InteractiveMapRulesService'] =
      new InteractiveMapRulesService();
    upgradedServices['InteractionSpecsService'] = new InteractionSpecsService();
    upgradedServices['ItemSelectionInputRulesService'] =
      new ItemSelectionInputRulesService();
    upgradedServices['LearnerParamsService'] = new LearnerParamsService();
    upgradedServices['LoaderService'] = new LoaderService();
    upgradedServices['LoggerService'] = new LoggerService();
    upgradedServices['MathEquationInputRulesService'] =
      new MathEquationInputRulesService(
        upgradedServices['AlgebraicExpressionInputRulesService']
      );
    upgradedServices['Meta'] = new Meta({});
    upgradedServices['MultipleChoiceInputRulesService'] =
      new MultipleChoiceInputRulesService();
    upgradedServices['MusicPhrasePlayerService'] =
      new MusicPhrasePlayerService();
    upgradedServices['NormalizeWhitespacePunctuationAndCasePipe'] =
      new NormalizeWhitespacePunctuationAndCasePipe();
    upgradedServices['NumberAttemptsService'] = new NumberAttemptsService();
    upgradedServices['NumericExpressionInputRulesService'] =
      new NumericExpressionInputRulesService();
    upgradedServices['NumericInputRulesService'] =
      new NumericInputRulesService();
    upgradedServices['RatingComputationService'] =
      new RatingComputationService();
    upgradedServices['RatioExpressionInputRulesService'] =
      new RatioExpressionInputRulesService();
    upgradedServices['ReviewTestEngineService'] = new ReviewTestEngineService();
    upgradedServices['SchemaFormSubmittedService'] =
      new SchemaFormSubmittedService();
    upgradedServices['SchemaUndefinedLastElementService'] =
      new SchemaUndefinedLastElementService();
    upgradedServices['SetInputRulesService'] = new SetInputRulesService();
    upgradedServices['SolutionValidityService'] = new SolutionValidityService();
    upgradedServices['StateEditorRefreshService'] =
      new StateEditorRefreshService();
    upgradedServices['StateGraphLayoutService'] = new StateGraphLayoutService();
    upgradedServices['StateNameService'] = new StateNameService();
    upgradedServices['SuggestionModalService'] = new SuggestionModalService();
    upgradedServices['SuggestionsService'] = new SuggestionsService();
    upgradedServices['ThreadStatusDisplayService'] =
      new ThreadStatusDisplayService();
    upgradedServices['Title'] = new Title({});
    upgradedServices['TopicsAndSkillsDashboardPageService'] =
      new TopicsAndSkillsDashboardPageService(
        upgradedServices['PlatformFeatureService']
      );
    upgradedServices['UtilsService'] = new UtilsService();
    upgradedServices['VersionTreeService'] = new VersionTreeService();
    upgradedServices['WindowRef'] = new WindowRef();
    upgradedServices['BaseInteractionValidationService'] =
      new BaseInteractionValidationService();
    upgradedServices['ɵangular_packages_common_http_http_d'] =
      new ɵangular_packages_common_http_http_d();

    // Topological level: 1.
    upgradedServices['AlgebraicExpressionInputValidationService'] =
      new AlgebraicExpressionInputValidationService(
        upgradedServices['BaseInteractionValidationService']
      );
    upgradedServices['AlertsService'] = new AlertsService(
      upgradedServices['LoggerService']
    );
    upgradedServices['BrowserCheckerService'] = new BrowserCheckerService(
      upgradedServices['WindowRef']
    );
    upgradedServices['CodeReplValidationService'] =
      new CodeReplValidationService(
        upgradedServices['BaseInteractionValidationService']
      );
    upgradedServices['ContinueValidationService'] =
      new ContinueValidationService(
        upgradedServices['BaseInteractionValidationService']
      );
    upgradedServices['DeviceInfoService'] = new DeviceInfoService(
      upgradedServices['WindowRef']
    );
    upgradedServices['DocumentAttributeCustomizationService'] =
      new DocumentAttributeCustomizationService(upgradedServices['WindowRef']);
    upgradedServices['DragAndDropSortInputValidationService'] =
      new DragAndDropSortInputValidationService(
        upgradedServices['BaseInteractionValidationService']
      );
    upgradedServices['EndExplorationValidationService'] =
      new EndExplorationValidationService(
        upgradedServices['BaseInteractionValidationService']
      );
    upgradedServices['ExpressionSyntaxTreeService'] =
      new ExpressionSyntaxTreeService(
        upgradedServices['ExpressionParserService']
      );
    upgradedServices['FractionInputRulesService'] =
      new FractionInputRulesService(upgradedServices['UtilsService']);
    upgradedServices['FractionInputValidationService'] =
      new FractionInputValidationService(
        upgradedServices['BaseInteractionValidationService']
      );
    upgradedServices['GraphInputRulesService'] = new GraphInputRulesService(
      upgradedServices['GraphUtilsService'],
      upgradedServices['UtilsService']
    );
    upgradedServices['GraphInputValidationService'] =
      new GraphInputValidationService(
        upgradedServices['BaseInteractionValidationService']
      );
    upgradedServices['GuestCollectionProgressService'] =
      new GuestCollectionProgressService(upgradedServices['WindowRef']);
    upgradedServices['HtmlEscaperService'] = new HtmlEscaperService(
      upgradedServices['LoggerService']
    );
    upgradedServices['HttpXhrBackend'] = new HttpXhrBackend(
      upgradedServices['ɵangular_packages_common_http_http_d']
    );
    upgradedServices['ImageClickInputValidationService'] =
      new ImageClickInputValidationService(
        upgradedServices['BaseInteractionValidationService']
      );
    upgradedServices['InteractiveMapValidationService'] =
      new InteractiveMapValidationService(
        upgradedServices['BaseInteractionValidationService']
      );
    upgradedServices['ItemSelectionInputValidationService'] =
      new ItemSelectionInputValidationService(
        upgradedServices['BaseInteractionValidationService']
      );
    upgradedServices['LocalStorageService'] = new LocalStorageService(
      upgradedServices['WindowRef']
    );
    upgradedServices['MathEquationInputValidationService'] =
      new MathEquationInputValidationService(
        upgradedServices['BaseInteractionValidationService']
      );
    upgradedServices['MessengerService'] = new MessengerService(
      upgradedServices['LoggerService'],
      upgradedServices['WindowRef']
    );
    upgradedServices['MetaTagCustomizationService'] =
      new MetaTagCustomizationService(upgradedServices['WindowRef']);
    upgradedServices['MultipleChoiceInputValidationService'] =
      new MultipleChoiceInputValidationService(
        upgradedServices['BaseInteractionValidationService']
      );
    upgradedServices['MusicNotesInputRulesService'] =
      new MusicNotesInputRulesService(upgradedServices['UtilsService']);
    upgradedServices['MusicNotesInputValidationService'] =
      new MusicNotesInputValidationService(
        upgradedServices['BaseInteractionValidationService']
      );
    upgradedServices['NormalizeWhitespacePipe'] = new NormalizeWhitespacePipe(
      upgradedServices['UtilsService']
    );
    upgradedServices['NumericInputValidationService'] =
      new NumericInputValidationService(
        upgradedServices['BaseInteractionValidationService']
      );
    upgradedServices['NumericExpressionInputValidationService'] =
      new NumericExpressionInputValidationService(
        upgradedServices['BaseInteractionValidationService']
      );
    upgradedServices['NumberWithUnitsRulesService'] =
      new NumberWithUnitsRulesService(upgradedServices['UtilsService']);
    upgradedServices['PageTitleService'] = new PageTitleService(
      upgradedServices['Meta'],
      upgradedServices['Title']
    );
    upgradedServices['PencilCodeEditorValidationService'] =
      new PencilCodeEditorValidationService(
        upgradedServices['BaseInteractionValidationService']
      );
    upgradedServices['PlayerTranscriptService'] = new PlayerTranscriptService(
      upgradedServices['LoggerService']
    );
    upgradedServices['ResponsesService'] = new ResponsesService(
      upgradedServices['AlertsService'],
      upgradedServices['LoggerService'],
      upgradedServices['SolutionValidityService'],
      upgradedServices['SolutionVerificationService'],
      upgradedServices['StateCustomizationArgsService'],
      upgradedServices['StateEditorService'],
      upgradedServices['StateInteractionIdService'],
      upgradedServices['StateSolutionService'],
      upgradedServices['ExplorationHtmlFormatterService']
    );
    upgradedServices['QuestionValidationService'] =
      new QuestionValidationService(
        upgradedServices['ResponsesService'],
        upgradedServices['StateEditorService'],
        upgradedServices['Injector']
      );
    upgradedServices['RatioExpressionInputValidationService'] =
      new RatioExpressionInputValidationService(
        upgradedServices['BaseInteractionValidationService']
      );
    upgradedServices['SetInputValidationService'] =
      new SetInputValidationService(
        upgradedServices['BaseInteractionValidationService']
      );
    upgradedServices['SkillCreationBackendApiService'] =
      new SkillCreationBackendApiService(
        upgradedServices['HttpClient'],
        upgradedServices['ImageLocalStorageService']
      );
    upgradedServices['StateTopAnswersStatsObjectFactory'] =
      new StateTopAnswersStatsObjectFactory();
    upgradedServices['SpeechSynthesisChunkerService'] =
      new SpeechSynthesisChunkerService(upgradedServices['HtmlEscaperService']);
    upgradedServices['SchemaDefaultValueService'] =
      new SchemaDefaultValueService(upgradedServices['LoggerService']);
    upgradedServices['SiteAnalyticsService'] = new SiteAnalyticsService(
      upgradedServices['WindowRef'],
      upgradedServices['LocalStorageService']
    );
    upgradedServices['StateEditorService'] = new StateEditorService(
      upgradedServices['SolutionValidityService']
    );
    upgradedServices['TextInputValidationService'] =
      new TextInputValidationService(
        upgradedServices['BaseInteractionValidationService']
      );
    upgradedServices['TopicCreationBackendApiService'] =
      new TopicCreationBackendApiService(upgradedServices['HttpClient']);
    upgradedServices['UrlService'] = new UrlService(
      upgradedServices['WindowRef']
    );
    upgradedServices['WindowDimensionsService'] = new WindowDimensionsService(
      upgradedServices['WindowRef']
    );

    // Topological level: 2.
    upgradedServices['CsrfTokenService'] = new CsrfTokenService(
      upgradedServices['HttpXhrBackend']
    );
    upgradedServices['CkEditorCopyContentService'] =
      new CkEditorCopyContentService(upgradedServices['HtmlEscaperService']);
    upgradedServices['AutogeneratedAudioPlayerService'] =
      new AutogeneratedAudioPlayerService(
        upgradedServices['SpeechSynthesisChunkerService']
      );
    upgradedServices['BottomNavbarStatusService'] =
      new BottomNavbarStatusService(
        upgradedServices['WindowDimensionsService']
      );
    upgradedServices['PreventPageUnloadEventService'] =
      new PreventPageUnloadEventService(upgradedServices['WindowRef']);
    upgradedServices['CodeReplRulesService'] = new CodeReplRulesService(
      upgradedServices['NormalizeWhitespacePipe'],
      upgradedServices['CodeNormalizerService']
    );
    upgradedServices['PageContextService'] = new PageContextService(
      upgradedServices['UrlService'],
      upgradedServices['BlogPostPageService']
    );
    upgradedServices['EditorFirstTimeEventsService'] =
      new EditorFirstTimeEventsService(
        upgradedServices['SiteAnalyticsService']
      );
    upgradedServices['ExplorationImprovementsTaskRegistryService'] =
      new ExplorationImprovementsTaskRegistryService();
    upgradedServices['ExpressionEvaluatorService'] =
      new ExpressionEvaluatorService(
        upgradedServices['ExpressionParserService'],
        upgradedServices['ExpressionSyntaxTreeService']
      );
    upgradedServices['ExtensionTagAssemblerService'] =
      new ExtensionTagAssemblerService(
        upgradedServices['HtmlEscaperService'],
        upgradedServices['CamelCaseToHyphensPipe']
      );
    upgradedServices['FocusManagerService'] = new FocusManagerService(
      upgradedServices['DeviceInfoService'],
      upgradedServices['IdGenerationService'],
      upgradedServices['WindowRef']
    );
    upgradedServices['HttpClient'] = new HttpClient(
      upgradedServices['HttpXhrBackend']
    );
    upgradedServices['LanguageUtilService'] = new LanguageUtilService(
      upgradedServices['BrowserCheckerService']
    );
    upgradedServices['NumberWithUnitsValidationService'] =
      new NumberWithUnitsValidationService(
        upgradedServices['BaseInteractionValidationService']
      );
    upgradedServices['PencilCodeEditorRulesService'] =
      new PencilCodeEditorRulesService(
        upgradedServices['NormalizeWhitespacePipe'],
        upgradedServices['NormalizeWhitespacePunctuationAndCasePipe'],
        upgradedServices['CodeNormalizerService']
      );
    upgradedServices['SidebarStatusService'] = new SidebarStatusService(
      upgradedServices['WindowDimensionsService']
    );
    upgradedServices['StateContentService'] = new StateContentService(
      upgradedServices['AlertsService'],
      upgradedServices['UtilsService']
    );
    upgradedServices['StateCustomizationArgsService'] =
      new StateCustomizationArgsService(
        upgradedServices['AlertsService'],
        upgradedServices['UtilsService']
      );
    upgradedServices['StateHintsService'] = new StateHintsService(
      upgradedServices['AlertsService'],
      upgradedServices['UtilsService']
    );
    upgradedServices['StateInteractionIdService'] =
      new StateInteractionIdService(
        upgradedServices['AlertsService'],
        upgradedServices['UtilsService']
      );
    upgradedServices['StatePropertyService'] = new StatePropertyService(
      upgradedServices['AlertsService'],
      upgradedServices['UtilsService']
    );
    upgradedServices['StateSolicitAnswerDetailsService'] =
      new StateSolicitAnswerDetailsService(
        upgradedServices['AlertsService'],
        upgradedServices['UtilsService']
      );
    upgradedServices['StateSolutionService'] = new StateSolutionService(
      upgradedServices['AlertsService'],
      upgradedServices['UtilsService']
    );
    upgradedServices['StoryEditorNavigationService'] =
      new StoryEditorNavigationService(upgradedServices['WindowRef']);
    upgradedServices['TextInputRulesService'] = new TextInputRulesService(
      upgradedServices['NormalizeWhitespacePipe']
    );
    upgradedServices['UrlInterpolationService'] = new UrlInterpolationService(
      upgradedServices['AlertsService'],
      upgradedServices['UrlService'],
      upgradedServices['UtilsService']
    );
    upgradedServices['ValidatorsService'] = new ValidatorsService(
      upgradedServices['AlertsService'],
      upgradedServices['NormalizeWhitespacePipe']
    );

    // Topological level: 3.
    upgradedServices['AdminBackendApiService'] = new AdminBackendApiService(
      upgradedServices['HttpClient'],
      upgradedServices['UrlInterpolationService']
    );
    upgradedServices['AdminDataService'] = new AdminDataService(
      upgradedServices['HttpClient']
    );
    upgradedServices['AssetsBackendApiService'] = new AssetsBackendApiService(
      upgradedServices['CsrfTokenService'],
      upgradedServices['HttpClient'],
      upgradedServices['UrlInterpolationService']
    );
    upgradedServices['EmailDashboardBackendApiService'] =
      new EmailDashboardBackendApiService(upgradedServices['HttpClient']);
    upgradedServices['ExplorationPermissionsBackendApiService'] =
      new ExplorationPermissionsBackendApiService(
        upgradedServices['PageContextService'],
        upgradedServices['HttpClient'],
        upgradedServices['UrlInterpolationService']
      );
    upgradedServices['ExplorationRecommendationsBackendApiService'] =
      new ExplorationRecommendationsBackendApiService(
        upgradedServices['HttpClient']
      );
    upgradedServices['InteractionRulesRegistryService'] =
      new InteractionRulesRegistryService(
        upgradedServices['AlgebraicExpressionInputRulesService'],
        upgradedServices['CodeReplRulesService'],
        upgradedServices['ContinueRulesService'],
        upgradedServices['DragAndDropSortInputRulesService'],
        upgradedServices['EndExplorationRulesService'],
        upgradedServices['FractionInputRulesService'],
        upgradedServices['GraphInputRulesService'],
        upgradedServices['ImageClickInputRulesService'],
        upgradedServices['InteractiveMapRulesService'],
        upgradedServices['ItemSelectionInputRulesService'],
        upgradedServices['MathEquationInputRulesService'],
        upgradedServices['MultipleChoiceInputRulesService'],
        upgradedServices['MusicNotesInputRulesService'],
        upgradedServices['NumberWithUnitsRulesService'],
        upgradedServices['NumericExpressionInputRulesService'],
        upgradedServices['NumericInputRulesService'],
        upgradedServices['PencilCodeEditorRulesService'],
        upgradedServices['RatioExpressionInputRulesService'],
        upgradedServices['SetInputRulesService'],
        upgradedServices['TextInputRulesService']
      );
    upgradedServices['ConceptCardBackendApiService'] =
      new ConceptCardBackendApiService(
        upgradedServices['HttpClient'],
        upgradedServices['UrlInterpolationService']
      );
    upgradedServices['ClassroomBackendApiService'] =
      new ClassroomBackendApiService(
        upgradedServices['UrlInterpolationService'],
        upgradedServices['HttpClient']
      );
    upgradedServices['CollectionCreationBackendService'] =
      new CollectionCreationBackendService(upgradedServices['HttpClient']);
    upgradedServices['CollectionRightsBackendApiService'] =
      new CollectionRightsBackendApiService(
        upgradedServices['HttpClient'],
        upgradedServices['UrlInterpolationService']
      );
    upgradedServices['ContributionOpportunitiesBackendApiService'] =
      new ContributionOpportunitiesBackendApiService(
        upgradedServices['UrlInterpolationService'],
        upgradedServices['HttpClient'],
        upgradedServices['UserService']
      );
    upgradedServices['CreatorDashboardBackendApiService'] =
      new CreatorDashboardBackendApiService(
        upgradedServices['HttpClient'],
        upgradedServices['SuggestionsService'],
        upgradedServices['LoggerService']
      );
    upgradedServices['CurrentInteractionService'] =
      new CurrentInteractionService(
        upgradedServices['PageContextService'],
        upgradedServices['PlayerPositionService'],
        upgradedServices['PlayerTranscriptService']
      );
    upgradedServices['ExplorationFeaturesBackendApiService'] =
      new ExplorationFeaturesBackendApiService(
        upgradedServices['HttpClient'],
        upgradedServices['UrlInterpolationService']
      );
    upgradedServices['ExplorationHtmlFormatterService'] =
      new ExplorationHtmlFormatterService(
        upgradedServices['CamelCaseToHyphensPipe'],
        upgradedServices['ExtensionTagAssemblerService'],
        upgradedServices['HtmlEscaperService']
      );
    upgradedServices['ExplorationImprovementsBackendApiService'] =
      new ExplorationImprovementsBackendApiService(
        upgradedServices['HttpClient'],
        upgradedServices['UrlInterpolationService']
      );
    upgradedServices['ExplorationStatsBackendApiService'] =
      new ExplorationStatsBackendApiService(
        upgradedServices['HttpClient'],
        upgradedServices['UrlInterpolationService']
      );
    upgradedServices['LearnerAnswerDetailsBackendApiService'] =
      new LearnerAnswerDetailsBackendApiService(
        upgradedServices['HttpClient'],
        upgradedServices['UrlInterpolationService']
      );
    upgradedServices['LearnerDashboardBackendApiService'] =
      new LearnerDashboardBackendApiService(upgradedServices['HttpClient']);
    upgradedServices['LearnerDashboardIdsBackendApiService'] =
      new LearnerDashboardIdsBackendApiService(upgradedServices['HttpClient']);
    upgradedServices['FeatureFlagBackendApiService'] =
      new FeatureFlagBackendApiService(upgradedServices['HttpClient']);
    upgradedServices['PlatformParameterAdminBackendApiService'] =
      new PlatformParameterAdminBackendApiService(
        upgradedServices['HttpClient']
      );
    upgradedServices['FeatureFlagDummyBackendApiService'] =
      new FeatureFlagDummyBackendApiService(upgradedServices['HttpClient']);
    upgradedServices['PlayerPositionService'] = new PlayerPositionService(
      upgradedServices['PlayerTranscriptService']
    );
    upgradedServices['PlaythroughBackendApiService'] =
      new PlaythroughBackendApiService(
        upgradedServices['HttpClient'],
        upgradedServices['UrlInterpolationService']
      );
    upgradedServices['PlaythroughIssuesBackendApiService'] =
      new PlaythroughIssuesBackendApiService(
        upgradedServices['HttpClient'],
        upgradedServices['UrlInterpolationService']
      );
    upgradedServices['ProfilePageBackendApiService'] =
      new ProfilePageBackendApiService(
        upgradedServices['UrlInterpolationService'],
        upgradedServices['HttpClient'],
        upgradedServices['UrlService'],
        upgradedServices['UserService']
      );
    upgradedServices['QuestionBackendApiService'] =
      new QuestionBackendApiService(
        upgradedServices['HttpClient'],
        upgradedServices['UrlInterpolationService']
      );
    upgradedServices['ReadOnlyCollectionBackendApiService'] =
      new ReadOnlyCollectionBackendApiService(
        upgradedServices['HttpClient'],
        upgradedServices['UrlInterpolationService']
      );
    upgradedServices['ReviewTestBackendApiService'] =
      new ReviewTestBackendApiService(
        upgradedServices['HttpClient'],
        upgradedServices['UrlInterpolationService'],
        upgradedServices['UrlService']
      );
    upgradedServices['SearchExplorationsBackendApiService'] =
      new SearchExplorationsBackendApiService(
        upgradedServices['HttpClient'],
        upgradedServices['UrlInterpolationService']
      );
    upgradedServices['SolutionVerificationService'] =
      new SolutionVerificationService(
        upgradedServices['InteractionRulesRegistryService'],
        upgradedServices['AnswerClassificationService'],
        upgradedServices['StateEditorService']
      );
    upgradedServices['SkillCreationBackendApiService'] =
      new SkillCreationBackendApiService(
        upgradedServices['HttpClient'],
        upgradedServices['ImageLocalStorageService']
      );
    upgradedServices['SkillMasteryBackendApiService'] =
      new SkillMasteryBackendApiService(upgradedServices['HttpClient']);
    upgradedServices['SkillRightsBackendApiService'] =
      new SkillRightsBackendApiService(
        upgradedServices['HttpClient'],
        upgradedServices['UrlInterpolationService']
      );
    upgradedServices['StateInteractionStatsBackendApiService'] =
      new StateInteractionStatsBackendApiService(
        upgradedServices['HttpClient'],
        upgradedServices['UrlInterpolationService']
      );
    upgradedServices['StateParamChangesService'] = new StateParamChangesService(
      upgradedServices['AlertsService'],
      upgradedServices['UrlInterpolationService']
    );
    upgradedServices['StateTopAnswersStatsBackendApiService'] =
      new StateTopAnswersStatsBackendApiService(
        upgradedServices['HttpClient'],
        upgradedServices['StateTopAnswersStatsObjectFactory'],
        upgradedServices['UrlInterpolationService']
      );
    upgradedServices['StatsReportingBackendApiService'] =
      new StatsReportingBackendApiService(
        upgradedServices['PageContextService'],
        upgradedServices['HttpClient'],
        upgradedServices['UrlInterpolationService']
      );
    upgradedServices['StoryViewerBackendApiService'] =
      new StoryViewerBackendApiService(
        upgradedServices['HttpClient'],
        upgradedServices['UrlInterpolationService']
      );
    upgradedServices['TopicCreationBackendApiService'] =
      new TopicCreationBackendApiService(upgradedServices['HttpClient']);
    upgradedServices['TopicsAndSkillsDashboardBackendApiService'] =
      new TopicsAndSkillsDashboardBackendApiService(
        upgradedServices['HttpClient'],
        upgradedServices['UrlInterpolationService']
      );
    upgradedServices['TopicViewerBackendApiService'] =
      new TopicViewerBackendApiService(
        upgradedServices['HttpClient'],
        upgradedServices['UrlInterpolationService']
      );
    upgradedServices['UserBackendApiService'] = new UserBackendApiService(
      upgradedServices['HttpClient']
    );
    upgradedServices['UserService'] = new UserService(
      upgradedServices['AssetsBackendApiService'],
      upgradedServices['ImageLocalStorageService'],
      upgradedServices['UrlInterpolationService'],
      upgradedServices['UrlService'],
      upgradedServices['WindowRef'],
      upgradedServices['UserBackendApiService']
    );
    upgradedServices['VoiceoverBackendApiService'] =
      new VoiceoverBackendApiService(
        upgradedServices['UrlInterpolationService'],
        upgradedServices['HttpClient']
      );

    // Topological level: 4.
    upgradedServices['CollectionCreationService'] =
      new CollectionCreationService(
        upgradedServices['CollectionCreationBackendService'],
        upgradedServices['AlertsService'],
        upgradedServices['SiteAnalyticsService'],
        upgradedServices['UrlInterpolationService'],
        upgradedServices['LoaderService'],
        upgradedServices['WindowRef']
      );
    upgradedServices['EditableCollectionBackendApiService'] =
      new EditableCollectionBackendApiService(
        upgradedServices['HttpClient'],
        upgradedServices['ReadOnlyCollectionBackendApiService'],
        upgradedServices['UrlInterpolationService']
      );
    upgradedServices['ExplorationRecommendationsService'] =
      new ExplorationRecommendationsService(
        upgradedServices['PageContextService'],
        upgradedServices['UrlService'],
        upgradedServices['ExplorationRecommendationsBackendApiService']
      );
    upgradedServices['ExplorationStatsService'] = new ExplorationStatsService(
      upgradedServices['ExplorationStatsBackendApiService']
    );
    upgradedServices['ExtensionTagAssemblerService'] =
      new ExtensionTagAssemblerService(
        upgradedServices['HtmlEscaperService'],
        upgradedServices['CamelCaseToHyphensPipe']
      );
    upgradedServices['PlatformFeatureService'] = new PlatformFeatureService(
      upgradedServices['FeatureFlagBackendApiService'],
      upgradedServices['WindowRef'],
      upgradedServices['LoggerService'],
      upgradedServices['UrlService']
    );
    upgradedServices['PopulateRuleContentIdsService'] =
      new PopulateRuleContentIdsService(
        upgradedServices['GenerateContentIdService']
      );
    upgradedServices['UserExplorationPermissionsService'] =
      new UserExplorationPermissionsService(
        upgradedServices['ExplorationPermissionsBackendApiService']
      );
    upgradedServices['SubtopicViewerBackendApiService'] =
      new SubtopicViewerBackendApiService(
        upgradedServices['HttpClient'],
        upgradedServices['UrlInterpolationService']
      );

    // Topological level: 5.
    upgradedServices['AnswerClassificationService'] =
      new AnswerClassificationService(
        upgradedServices['AlertsService'],
        upgradedServices['InteractionSpecsService']
      );
    upgradedServices['AudioPreloaderService'] = new AudioPreloaderService(
      upgradedServices['AssetsBackendApiService'],
      upgradedServices['ComputeGraphService'],
      upgradedServices['PageContextService']
    );
    upgradedServices['ExplorationHtmlFormatterService'] =
      new ExplorationHtmlFormatterService(
        upgradedServices['CamelCaseToHyphensPipe'],
        upgradedServices['ExtensionTagAssemblerService'],
        upgradedServices['HtmlEscaperService']
      );
    upgradedServices['SubtopicViewerBackendApiService'] =
      new SubtopicViewerBackendApiService(
        upgradedServices['HttpClient'],
        upgradedServices['UrlInterpolationService']
      );

    // Topological level: 6.
    upgradedServices['StateInteractionStatsService'] =
      new StateInteractionStatsService(
        upgradedServices['AnswerClassificationService'],
        upgradedServices['InteractionRulesRegistryService'],
        upgradedServices['StateInteractionStatsBackendApiService']
      );
    upgradedServices['StateTopAnswersStatsService'] =
      new StateTopAnswersStatsService(
        upgradedServices['AnswerClassificationService'],
        upgradedServices['InteractionRulesRegistryService'],
        upgradedServices['StateTopAnswersStatsBackendApiService']
      );

    // Topological level: 7.
    upgradedServices['InteractionAttributesExtractorService'] =
      new InteractionAttributesExtractorService(
        upgradedServices['HtmlEscaperService']
      );

    // Topological level: 8.
    upgradedServices['ExplorationObjectFactory'] = new ExplorationObjectFactory(
      upgradedServices['LoggerService'],
      upgradedServices['UrlInterpolationService']
    );
    upgradedServices['PretestQuestionBackendApiService'] =
      new PretestQuestionBackendApiService(
        upgradedServices['UrlInterpolationService'],
        upgradedServices['HttpClient']
      );

    /* eslint-enable dot-notation */
    return upgradedServices;
  }
}
